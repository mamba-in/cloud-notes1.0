import{_ as n,f as s,e as a,N as t}from"./plugin-vue_export-helper.147b70e9.js";const g='{"title":"\u6743\u9650","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u524D\u7AEF\u89D2\u8272\u6743\u9650","slug":"\u524D\u7AEF\u89D2\u8272\u6743\u9650"},{"level":3,"title":"\u5B9E\u73B0","slug":"\u5B9E\u73B0"},{"level":3,"title":"\u52A8\u6001\u66F4\u6362\u89D2\u8272","slug":"\u52A8\u6001\u66F4\u6362\u89D2\u8272"},{"level":3,"title":"\u7EC6\u7C92\u5EA6\u6743\u9650","slug":"\u7EC6\u7C92\u5EA6\u6743\u9650"},{"level":2,"title":"\u540E\u53F0\u52A8\u6001\u83B7\u53D6","slug":"\u540E\u53F0\u52A8\u6001\u83B7\u53D6"},{"level":3,"title":"\u5B9E\u73B0","slug":"\u5B9E\u73B0-1"},{"level":3,"title":"\u52A8\u6001\u66F4\u6362\u83DC\u5355","slug":"\u52A8\u6001\u66F4\u6362\u83DC\u5355"},{"level":3,"title":"\u7EC6\u7C92\u5EA6\u6743\u9650","slug":"\u7EC6\u7C92\u5EA6\u6743\u9650-1"},{"level":3,"title":"\u5982\u4F55\u521D\u59CB\u5316 code","slug":"\u5982\u4F55\u521D\u59CB\u5316-code"}],"relativePath":"guide/auth.md","lastUpdated":1652416785003}',p={},o=t(`<h1 id="\u6743\u9650"><a class="header-anchor" href="#\u6743\u9650" aria-hidden="true">#</a> \u6743\u9650</h1><p>\u9879\u76EE\u4E2D\u96C6\u6210\u4E86\u4E09\u79CD\u6743\u9650\u5904\u7406\u65B9\u5F0F\uFF1A</p><ol><li>\u901A\u8FC7\u7528\u6237\u89D2\u8272\u6765\u8FC7\u6EE4\u83DC\u5355(\u524D\u7AEF\u65B9\u5F0F\u63A7\u5236)\uFF0C\u83DC\u5355\u548C\u8DEF\u7531\u5206\u5F00\u914D\u7F6E</li><li>\u901A\u8FC7\u7528\u6237\u89D2\u8272\u6765\u8FC7\u6EE4\u83DC\u5355(\u524D\u7AEF\u65B9\u5F0F\u63A7\u5236)\uFF0C\u83DC\u5355\u7531\u8DEF\u7531\u914D\u7F6E\u81EA\u52A8\u751F\u6210</li><li>\u901A\u8FC7\u540E\u53F0\u6765\u52A8\u6001\u751F\u6210\u8DEF\u7531\u8868(\u540E\u53F0\u65B9\u5F0F\u63A7\u5236)</li></ol><h2 id="\u524D\u7AEF\u89D2\u8272\u6743\u9650"><a class="header-anchor" href="#\u524D\u7AEF\u89D2\u8272\u6743\u9650" aria-hidden="true">#</a> \u524D\u7AEF\u89D2\u8272\u6743\u9650</h2><p><strong>\u5B9E\u73B0\u539F\u7406:</strong> \u5728\u524D\u7AEF\u56FA\u5B9A\u5199\u6B7B\u8DEF\u7531\u7684\u6743\u9650\uFF0C\u6307\u5B9A\u8DEF\u7531\u6709\u54EA\u4E9B\u6743\u9650\u53EF\u4EE5\u67E5\u770B\u3002\u53EA\u521D\u59CB\u5316\u901A\u7528\u7684\u8DEF\u7531\uFF0C\u9700\u8981\u6743\u9650\u624D\u80FD\u8BBF\u95EE\u7684\u8DEF\u7531\u6CA1\u6709\u88AB\u52A0\u5165\u8DEF\u7531\u8868\u5185\u3002\u5728\u767B\u9646\u540E\u6216\u8005\u5176\u4ED6\u65B9\u5F0F\u83B7\u53D6\u7528\u6237\u89D2\u8272\u540E\uFF0C\u901A\u8FC7\u89D2\u8272\u53BB\u904D\u5386\u8DEF\u7531\u8868\uFF0C\u83B7\u53D6\u8BE5\u89D2\u8272\u53EF\u4EE5\u8BBF\u95EE\u7684\u8DEF\u7531\u8868\uFF0C\u751F\u6210\u8DEF\u7531\u8868\uFF0C\u518D\u901A\u8FC7 <code>router.addRoutes</code> \u6DFB\u52A0\u5230\u8DEF\u7531\u5B9E\u4F8B\uFF0C\u5B9E\u73B0\u6743\u9650\u7684\u8FC7\u6EE4\u3002</p><p><strong>\u7F3A\u70B9:</strong> \u6743\u9650\u76F8\u5BF9\u4E0D\u81EA\u7531\uFF0C\u5982\u679C\u540E\u53F0\u6539\u52A8\u89D2\u8272\uFF0C\u524D\u53F0\u4E5F\u9700\u8981\u8DDF\u7740\u6539\u52A8\u3002\u9002\u5408\u89D2\u8272\u8F83\u56FA\u5B9A\u7684\u7CFB\u7EDF</p><h3 id="\u5B9E\u73B0"><a class="header-anchor" href="#\u5B9E\u73B0" aria-hidden="true">#</a> \u5B9E\u73B0</h3><ol><li>\u5728<a href="./settings.html#\u9879\u76EE\u914D\u7F6E">\u9879\u76EE\u914D\u7F6E</a>\u5C06\u7CFB\u7EDF\u5185\u6743\u9650\u6A21\u5F0F\u6539\u4E3A <code>ROLE</code> \u6A21\u5F0F</li></ol><div class="language-ts"><pre><code><span class="token comment">// ! \u6539\u52A8\u540E\u9700\u8981\u6E05\u7A7A\u6D4F\u89C8\u5668\u7F13\u5B58</span>
<span class="token keyword">const</span> setting<span class="token operator">:</span> ProjectConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6743\u9650\u6A21\u5F0F</span>
  permissionMode<span class="token operator">:</span> PermissionModeEnum<span class="token punctuation">.</span><span class="token constant">ROLE</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>\u5728\u8DEF\u7531\u8868\u914D\u7F6E\u8DEF\u7531\u6240\u9700\u7684\u6743\u9650\uFF0C\u5982\u679C\u4E0D\u914D\u7F6E\uFF0C\u9ED8\u8BA4\u53EF\u89C1(\u89C1\u6CE8\u91CA)</li></ol><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AppRouteModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/router/types&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> getParentLayout<span class="token punctuation">,</span> <span class="token constant">LAYOUT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/router/constant&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RoleEnum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/enums/roleEnum&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> t <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/hooks/web/useI18n&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> permission<span class="token operator">:</span> AppRouteModule <span class="token operator">=</span> <span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&#39;/permission&#39;</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&#39;Permission&#39;</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> <span class="token constant">LAYOUT</span><span class="token punctuation">,</span>
  redirect<span class="token operator">:</span> <span class="token string">&#39;/permission/front/page&#39;</span><span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{</span>
    icon<span class="token operator">:</span> <span class="token string">&#39;ion:key-outline&#39;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;routes.demo.permission.permission&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  children<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;front&#39;</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">&#39;PermissionFrontDemo&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> <span class="token function">getParentLayout</span><span class="token punctuation">(</span><span class="token string">&#39;PermissionFrontDemo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      meta<span class="token operator">:</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;routes.demo.permission.front&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">&#39;auth-pageA&#39;</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&#39;FrontAuthPageA&#39;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;/@/views/demo/permission/front/AuthPageA.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          meta<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;routes.demo.permission.frontTestA&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            roles<span class="token operator">:</span> <span class="token punctuation">[</span>RoleEnum<span class="token punctuation">.</span><span class="token constant">SUPER</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">&#39;auth-pageB&#39;</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&#39;FrontAuthPageB&#39;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;/@/views/demo/permission/front/AuthPageB.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          meta<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;routes.demo.permission.frontTestB&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            roles<span class="token operator">:</span> <span class="token punctuation">[</span>RoleEnum<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> permission<span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>\u5728\u8DEF\u7531\u94A9\u5B50\u5185\u52A8\u6001\u5224\u65AD</li></ol><p>\u8BE6\u7EC6\u4EE3\u7801\u89C1 <a href="https://github.com/vbenjs/vue-vben-admin/tree/main/src/router/guard/permissionGuard.ts" target="_blank" rel="noopener noreferrer">src/router/guard/permissionGuard.ts</a></p><div class="language-ts"><pre><code><span class="token comment">// \u8FD9\u91CC\u53EA\u5217\u4E3E\u4E86\u4E3B\u8981\u4EE3\u7801</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token keyword">await</span> permissionStore<span class="token punctuation">.</span><span class="token function">buildRoutesAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>route <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> RouteRecordRaw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> redirectPath <span class="token operator">=</span> <span class="token punctuation">(</span>from<span class="token punctuation">.</span>query<span class="token punctuation">.</span>redirect <span class="token operator">||</span> to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> redirect <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>redirectPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nextData <span class="token operator">=</span> to<span class="token punctuation">.</span>path <span class="token operator">===</span> redirect <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token operator">...</span>to<span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> redirect <span class="token punctuation">}</span><span class="token punctuation">;</span>
permissionStore<span class="token punctuation">.</span><span class="token function">setDynamicAddedRoute</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">next</span><span class="token punctuation">(</span>nextData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>permissionStore.buildRoutesAction</strong> \u7528\u4E8E<strong>\u8FC7\u6EE4\u52A8\u6001\u8DEF\u7531</strong>\uFF0C\u8BE6\u7EC6\u4EE3\u7801\u89C1 <a href="https://github.com/vbenjs/vue-vben-admin/tree/main/src/store/modules/permission.ts" target="_blank" rel="noopener noreferrer">src/store/modules/permission.ts</a></p><div class="language-ts"><pre><code><span class="token comment">// \u4E3B\u8981\u4EE3\u7801</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>permissionMode <span class="token operator">===</span> PermissionModeEnum<span class="token punctuation">.</span><span class="token constant">ROLE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">routeFilter</span> <span class="token operator">=</span> <span class="token punctuation">(</span>route<span class="token operator">:</span> AppRouteRecordRaw<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> meta <span class="token punctuation">}</span> <span class="token operator">=</span> route<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> roles <span class="token punctuation">}</span> <span class="token operator">=</span> meta <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>roles<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> roleList<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> roles<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  routes <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>asyncRoutes<span class="token punctuation">,</span> routeFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
  routes <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>routeFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Convert multi-level routing to level 2 routing</span>
  routes <span class="token operator">=</span> <span class="token function">flatMultiLevelRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="\u52A8\u6001\u66F4\u6362\u89D2\u8272"><a class="header-anchor" href="#\u52A8\u6001\u66F4\u6362\u89D2\u8272" aria-hidden="true">#</a> \u52A8\u6001\u66F4\u6362\u89D2\u8272</h3><p>\u7CFB\u7EDF\u63D0\u4F9B <a href="https://github.com/vbenjs/vue-vben-admin/tree/main/src/hooks/web/usePermission.ts" target="_blank" rel="noopener noreferrer">usePermission</a> \u65B9\u4FBF\u89D2\u8272\u76F8\u5173\u64CD\u4F5C</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> usePermission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/hooks/web/usePermission&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RoleEnum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/enums/roleEnum&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> changeRole <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u66F4\u6362\u4E3Atest\u89D2\u8272</span>
    <span class="token comment">// \u52A8\u6001\u66F4\u6539\u89D2\u8272\uFF0C\u4F20\u5165\u89D2\u8272\u540D\u79F0\uFF0C\u53EF\u4EE5\u662F\u6570\u7EC4</span>
    <span class="token function">changeRole</span><span class="token punctuation">(</span>RoleEnum<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="\u7EC6\u7C92\u5EA6\u6743\u9650"><a class="header-anchor" href="#\u7EC6\u7C92\u5EA6\u6743\u9650" aria-hidden="true">#</a> \u7EC6\u7C92\u5EA6\u6743\u9650</h3><p><strong>\u51FD\u6570\u65B9\u5F0F</strong></p><p><a href="https://github.com/vbenjs/vue-vben-admin/tree/main/src/hooks/web/usePermission.ts" target="_blank" rel="noopener noreferrer">usePermission</a> \u8FD8\u63D0\u4F9B\u4E86\u6309\u94AE\u7EA7\u522B\u7684\u6743\u9650\u63A7\u5236\u3002</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hasPermission([RoleEnum.TEST, RoleEnum.SUPER])<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mx-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    \u62E5\u6709[test,super]\u89D2\u8272\u6743\u9650\u53EF\u89C1
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> usePermission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/hooks/web/usePermission&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> RoleEnum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/enums/roleEnum&#39;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> hasPermission <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span> hasPermission <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>\u7EC4\u4EF6\u65B9\u5F0F</strong></p><p>\u5177\u4F53\u67E5\u770B<a href="./../components/auth.html">\u6743\u9650\u7EC4\u4EF6\u4F7F\u7528</a></p><p><strong>\u6307\u4EE4\u65B9\u5F0F</strong></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u6307\u4EE4\u65B9\u5F0F\u4E0D\u80FD\u52A8\u6001\u66F4\u6539\u6743\u9650</p></div><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">v-auth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>RoleEnum.SUPER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mx-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> \u62E5\u6709super\u89D2\u8272\u6743\u9650\u53EF\u89C1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="\u540E\u53F0\u52A8\u6001\u83B7\u53D6"><a class="header-anchor" href="#\u540E\u53F0\u52A8\u6001\u83B7\u53D6" aria-hidden="true">#</a> \u540E\u53F0\u52A8\u6001\u83B7\u53D6</h2><p><strong>\u5B9E\u73B0\u539F\u7406:</strong> \u662F\u901A\u8FC7\u63A5\u53E3\u52A8\u6001\u751F\u6210\u8DEF\u7531\u8868\uFF0C\u4E14\u9075\u5FAA\u4E00\u5B9A\u7684\u6570\u636E\u7ED3\u6784\u8FD4\u56DE\u3002\u524D\u7AEF\u6839\u636E\u9700\u8981\u5904\u7406\u8BE5\u6570\u636E\u4E3A\u53EF\u8BC6\u522B\u7684\u7ED3\u6784\uFF0C\u518D\u901A\u8FC7 <code>router.addRoutes</code> \u6DFB\u52A0\u5230\u8DEF\u7531\u5B9E\u4F8B\uFF0C\u5B9E\u73B0\u6743\u9650\u7684\u52A8\u6001\u751F\u6210\u3002</p><h3 id="\u5B9E\u73B0-1"><a class="header-anchor" href="#\u5B9E\u73B0-1" aria-hidden="true">#</a> \u5B9E\u73B0</h3><ol><li>\u5728<a href="./settings.html#\u9879\u76EE\u914D\u7F6E">\u9879\u76EE\u914D\u7F6E</a>\u5C06\u7CFB\u7EDF\u5185\u6743\u9650\u6A21\u5F0F\u6539\u4E3A <code>BACK</code> \u6A21\u5F0F</li></ol><div class="language-ts"><pre><code><span class="token comment">// ! \u6539\u52A8\u540E\u9700\u8981\u6E05\u7A7A\u6D4F\u89C8\u5668\u7F13\u5B58</span>
<span class="token keyword">const</span> setting<span class="token operator">:</span> ProjectConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6743\u9650\u6A21\u5F0F</span>
  permissionMode<span class="token operator">:</span> PermissionModeEnum<span class="token punctuation">.</span><span class="token constant">BACK</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>\u8DEF\u7531\u62E6\u622A\uFF0C\u4E0E\u89D2\u8272\u6743\u9650\u6A21\u5F0F\u4E00\u81F4</li></ol><p><strong>permissionStore.buildRoutesAction</strong> \u7528\u4E8E<strong>\u8FC7\u6EE4\u52A8\u6001\u8DEF\u7531</strong>\uFF0C\u8BE6\u7EC6\u4EE3\u7801\u89C1 <a href="https://github.com/vbenjs/vue-vben-admin/tree/main/src/store/modules/permission.ts" target="_blank" rel="noopener noreferrer">/@/store/modules/permission.ts</a></p><div class="language-ts"><pre><code><span class="token comment">// \u4E3B\u8981\u4EE3\u7801</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>permissionMode <span class="token operator">===</span> PermissionModeEnum<span class="token punctuation">.</span><span class="token constant">BACK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> createMessage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  createMessage<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    content<span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;sys.app.menuLoading&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// !Simulate to obtain permission codes from the background,</span>
  <span class="token comment">// this function may only need to be executed once, and the actual project can be put at the right time by itself</span>
  <span class="token keyword">let</span> routeList<span class="token operator">:</span> AppRouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changePermissionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    routeList <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getMenuList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> AppRouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Dynamically introduce components</span>
  routeList <span class="token operator">=</span> <span class="token function">transformObjToRoute</span><span class="token punctuation">(</span>routeList<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//  Background routing to menu structure</span>
  <span class="token keyword">const</span> backMenuList <span class="token operator">=</span> <span class="token function">transformRouteToMenu</span><span class="token punctuation">(</span>routeList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setBackMenuList</span><span class="token punctuation">(</span>backMenuList<span class="token punctuation">)</span><span class="token punctuation">;</span>

  routeList <span class="token operator">=</span> <span class="token function">flatMultiLevelRoutes</span><span class="token punctuation">(</span>routeList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">PAGE_NOT_FOUND_ROUTE</span><span class="token punctuation">,</span> <span class="token operator">...</span>routeList<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>getMenuList \u8FD4\u56DE\u503C\u683C\u5F0F</strong></p><p>\u8FD4\u56DE\u503C\u7531\u591A\u4E2A\u8DEF\u7531\u6A21\u5757\u7EC4\u6210</p><div class="warning custom-block"><p class="custom-block-title">\u6CE8\u610F</p><p>\u540E\u7AEF\u63A5\u53E3\u8FD4\u56DE\u7684\u6570\u636E\u4E2D\u5FC5\u987B\u5305\u542B<code>PageEnum.BASE_HOME</code>\u6307\u5B9A\u7684\u8DEF\u7531\uFF08path\u5B9A\u4E49\u4E8E<code>src/enums/pageEnum.ts</code>\uFF09</p></div><div class="language-ts"><pre><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/dashboard&#39;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#39;Dashboard&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token string">&#39;/dashboard/welcome/index&#39;</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&#39;routes.dashboard.welcome&#39;</span><span class="token punctuation">,</span>
      affix<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      icon<span class="token operator">:</span> <span class="token string">&#39;ant-design:home-outlined&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/permission&#39;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#39;Permission&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token string">&#39;LAYOUT&#39;</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">&#39;/permission/front/page&#39;</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span>
      icon<span class="token operator">:</span> <span class="token string">&#39;carbon:user-role&#39;</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">&#39;routes.demo.permission.permission&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;back&#39;</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">&#39;PermissionBackDemo&#39;</span><span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span>
          title<span class="token operator">:</span> <span class="token string">&#39;routes.demo.permission.back&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        children<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            path<span class="token operator">:</span> <span class="token string">&#39;page&#39;</span><span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token string">&#39;BackAuthPage&#39;</span><span class="token punctuation">,</span>
            component<span class="token operator">:</span> <span class="token string">&#39;/demo/permission/back/index&#39;</span><span class="token punctuation">,</span>
            meta<span class="token operator">:</span> <span class="token punctuation">{</span>
              title<span class="token operator">:</span> <span class="token string">&#39;routes.demo.permission.backPage&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            path<span class="token operator">:</span> <span class="token string">&#39;btn&#39;</span><span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token string">&#39;BackAuthBtn&#39;</span><span class="token punctuation">,</span>
            component<span class="token operator">:</span> <span class="token string">&#39;/demo/permission/back/Btn&#39;</span><span class="token punctuation">,</span>
            meta<span class="token operator">:</span> <span class="token punctuation">{</span>
              title<span class="token operator">:</span> <span class="token string">&#39;routes.demo.permission.backBtn&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="\u52A8\u6001\u66F4\u6362\u83DC\u5355"><a class="header-anchor" href="#\u52A8\u6001\u66F4\u6362\u83DC\u5355" aria-hidden="true">#</a> \u52A8\u6001\u66F4\u6362\u83DC\u5355</h3><p>\u7CFB\u7EDF\u63D0\u4F9B <a href="https://github.com/vbenjs/vue-vben-admin/tree/main/src/hooks/web/usePermission.ts" target="_blank" rel="noopener noreferrer">usePermission</a> \u65B9\u4FBF\u89D2\u8272\u76F8\u5173\u64CD\u4F5C</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> usePermission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/hooks/web/usePermission&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RoleEnum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/enums/roleEnum&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> changeMenu <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u66F4\u6539\u83DC\u5355\u7684\u5B9E\u73B0\u9700\u8981\u81EA\u884C\u53BB\u4FEE\u6539</span>
    <span class="token function">changeMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="\u7EC6\u7C92\u5EA6\u6743\u9650-1"><a class="header-anchor" href="#\u7EC6\u7C92\u5EA6\u6743\u9650-1" aria-hidden="true">#</a> \u7EC6\u7C92\u5EA6\u6743\u9650</h3><p><strong>\u51FD\u6570\u65B9\u5F0F</strong></p><p><a href="https://github.com/vbenjs/vue-vben-admin/tree/main/src/hooks/web/usePermission.ts" target="_blank" rel="noopener noreferrer">usePermission</a> \u8FD8\u63D0\u4F9B\u4E86\u6309\u94AE\u7EA7\u522B\u7684\u6743\u9650\u63A7\u5236\u3002</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hasPermission([<span class="token punctuation">&#39;</span>20000<span class="token punctuation">&#39;</span>, <span class="token punctuation">&#39;</span>2000010<span class="token punctuation">&#39;</span>])<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mx-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    \u62E5\u6709[20000,2000010]code\u53EF\u89C1
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> usePermission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/hooks/web/usePermission&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> RoleEnum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/enums/roleEnum&#39;</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> hasPermission <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> hasPermission <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>\u7EC4\u4EF6\u65B9\u5F0F</strong></p><p>\u5177\u4F53\u67E5\u770B<a href="./../components/auth.html">\u6743\u9650\u7EC4\u4EF6\u4F7F\u7528</a></p><p><strong>\u6307\u4EE4\u65B9\u5F0F</strong></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u6307\u4EE4\u65B9\u5F0F\u4E0D\u80FD\u52A8\u6001\u66F4\u6539\u6743\u9650</p></div><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">v-auth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>1000<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mx-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> \u62E5\u6709code [&#39;1000&#39;]\u6743\u9650\u53EF\u89C1 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="\u5982\u4F55\u521D\u59CB\u5316-code"><a class="header-anchor" href="#\u5982\u4F55\u521D\u59CB\u5316-code" aria-hidden="true">#</a> \u5982\u4F55\u521D\u59CB\u5316 code</h3><p>\u901A\u5E38\uFF0C\u5982\u9700\u505A\u6309\u94AE\u7EA7\u522B\u6743\u9650\uFF0C\u540E\u53F0\u4F1A\u63D0\u4F9B\u76F8\u5E94\u7684 code\uFF0C\u6216\u8005\u7C7B\u578B\u7684\u5224\u65AD\u6807\u8BC6\u3002\u8FD9\u4E9B\u7F16\u7801\u53EA\u9700\u8981\u5728\u767B\u5F55\u540E\u83B7\u53D6\u4E00\u6B21\u5373\u53EF\u3002</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getPermCodeByUserId <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/api/sys/user&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> permissionStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;/@/store/modules/permission&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">changePermissionCode</span><span class="token punctuation">(</span>userId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u4ECE\u540E\u53F0\u83B7\u53D6\u5F53\u524D\u7528\u6237\u62E5\u6709\u7684\u7F16\u7801</span>
  <span class="token keyword">const</span> codeList <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPermCodeByUserId</span><span class="token punctuation">(</span><span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  permissionStore<span class="token punctuation">.</span><span class="token function">commitPermCodeListState</span><span class="token punctuation">(</span>codeList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>`,55),e=[o];function c(u,l,i,k,r,d){return a(),s("div",null,e)}var h=n(p,[["render",c]]);export{g as __pageData,h as default};
